--- nginx.conf.default	2016-10-27 00:13:32.000000000 +0800
+++ nginx.conf	2016-12-07 06:40:34.000000000 +0800
@@ -1,16 +1,17 @@
+# nginx.conf -- Mac OS
 
 #user  nobody;
-worker_processes  1;
+#user  _www _www;     ## <-- user group
+worker_processes  2;
 
-#error_log  logs/error.log;
-#error_log  logs/error.log  notice;
-#error_log  logs/error.log  info;
-
-#pid        logs/nginx.pid;
+# @see http://nginx.org/en/docs/ngx_core_module.html#error_log
+#      log level: debug | info | notice | warn | error ...
+error_log  /usr/local/var/log/nginx/error.log  debug;
 
+pid /usr/local/var/run/nginx.pid;
 
 events {
-    worker_connections  1024;
+    worker_connections  256;
 }
 
 
@@ -18,11 +19,11 @@
     include       mime.types;
     default_type  application/octet-stream;
 
-    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
-    #                  '$status $body_bytes_sent "$http_referer" '
-    #                  '"$http_user_agent" "$http_x_forwarded_for"';
+    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
+                      '$status $body_bytes_sent "$http_referer" '
+                      '"$http_user_agent" "$http_x_forwarded_for"';
 
-    #access_log  logs/access.log  main;
+    access_log  /usr/local/var/log/nginx/access.log  main;
 
     sendfile        on;
     #tcp_nopush     on;
@@ -30,29 +31,31 @@
     #keepalive_timeout  0;
     keepalive_timeout  65;
 
-    #gzip  on;
+    gzip  on;
+    gzip_disable  "MSIE [1-6]\.(?!.*SV1)";
 
+    ## HTTP Server
+    #
     server {
-        listen       8080;
+        listen       8000;
+        listen       [::]:8000;
         server_name  localhost;
 
-        #charset koi8-r;
+        root   /usr/local/var/www;
 
-        #access_log  logs/host.access.log  main;
+        #charset  koi8-r;
+        charset  utf-8;
 
         location / {
-            root   html;
-            index  index.html index.htm;
+            try_files  $uri $uri/ /index.php$is_args$args
+            index  index.php index.html index.htm;
         }
 
-        #error_page  404              /404.html;
+        error_page  404               /404.html;
 
         # redirect server error pages to the static page /50x.html
         #
         error_page   500 502 503 504  /50x.html;
-        location = /50x.html {
-            root   html;
-        }
 
         # proxy the PHP scripts to Apache listening on 127.0.0.1:80
         #
@@ -60,44 +63,35 @@
         #    proxy_pass   http://127.0.0.1;
         #}
 
-        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
+        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9090
         #
-        #location ~ \.php$ {
-        #    root           html;
-        #    fastcgi_pass   127.0.0.1:9000;
-        #    fastcgi_index  index.php;
-        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
-        #    include        fastcgi_params;
-        #}
+        location ~ \.php$ {
+            fastcgi_pass   127.0.0.1:9090;
+            fastcgi_index  index.php;
+            fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
+
+            fastcgi_intercept_errors on;
+            include        fastcgi_params;
+        }
+
+        # maximum allowed size of the client request body (upload file size)
+        #
+        client_max_body_size 8M;
 
         # deny access to .htaccess files, if Apache's document root
         # concurs with nginx's one
         #
-        #location ~ /\.ht {
-        #    deny  all;
-        #}
+        location ~ /\.ht {
+            deny  all;
+        }
     }
 
-
-    # another virtual host using mix of IP-, name-, and port-based configuration
-    #
-    #server {
-    #    listen       8000;
-    #    listen       somename:8080;
-    #    server_name  somename  alias  another.alias;
-
-    #    location / {
-    #        root   html;
-    #        index  index.html index.htm;
-    #    }
-    #}
-
-
     # HTTPS server
     #
     #server {
     #    listen       443 ssl;
     #    server_name  localhost;
+    #    root   /usr/local/var/www;
 
     #    ssl_certificate      cert.pem;
     #    ssl_certificate_key  cert.key;
@@ -109,9 +103,11 @@
     #    ssl_prefer_server_ciphers  on;
 
     #    location / {
-    #        root   html;
     #        index  index.html index.htm;
     #    }
     #}
+
     include servers/*;
 }
+
+# vim: syntax=conf ts=4 sw=4 sts=4 sr et
